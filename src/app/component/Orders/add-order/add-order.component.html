<div class="card">
    <!-- <h5>ADDING ORDERS</h5> -->
    <p-tabView>

        <!-- <p-tabPanel header="OUT ORDER" leftIcon="pi pi-arrow-left" rightIcon="pi pi-inbox" tooltip="1974">
            <div class="col">
                <label class="labelstyle">Select Form Name</label>
                <select [(ngModel)]="ExistDrugs.id" name="Form" class="form-control">Profession
                  <option value="" selected disabled hidden>Form</option>
                  <option *ngFor="let the of ExistDrugs" value="{{the.id}}">{{the.name}}</option>
                </select>
              </div>
        </p-tabPanel> -->

        <p-tabPanel header="TRANSFER ORDER" leftIcon="pi pi-play" rightIcon="pi pi-pause" tooltip="1990">

            <div>
                <!-- <h5>Addons</h5> -->
                <div class="p-grid p-fluid row">
                    <div class="p-col-12 p-md-4">
                        <p-dropdown [options]="ExistDrugs" [(ngModel)]="selectedDrug" optionLabel="tradeName"
                            [filter]="true" [showClear]="true" placeholder="Select a Drug">
                            <ng-template pTemplate="selectedItem">
                                <div class="country-item country-item-value" *ngIf="selectedDrug">
                                    <img src="http://localhost:51563/api/drugs/getImage/{{selectedDrug.img}}" alt=""
                                        [class]="'flag flag-' + selectedDrug.tradeName.toLowerCase()"
                                        style="width: 90px ;height: 50px;">
                                    <!-- <img src="assets/showcase/images/demo/flag/flag_placeholder.png" [class]="'flag flag-' + selectedDrug.tradeName.toLowerCase()" /> -->
                                    <div>{{selectedDrug.tradeName}}</div>
                                </div>
                            </ng-template>
                            <ng-template let-item>
                                <div class="country-item">
                                    <!-- <img src="http://localhost:51563/api/drugs/getImage/{{item.img}}" [class]="'flag flag-' + country.tradeName.toLowerCase()" alt="">{{item.img}} -->
                                    <!-- <img src=""  /> -->
                                    <div>{{item.tradeName}}</div>
                                </div>
                            </ng-template>
                        </p-dropdown>
                    </div>

                    <div class="p-col-10 p-md-4">
                        <div class="p-inputgroup">
                            <span class="p-inputgroup-addon">Price</span>
                            <input type="text" pInputText placeholder="Price" [(ngModel)]="orderDetailObj.price">
                            <span class="p-inputgroup-addon">.00</span>
                        </div>
                    </div>
                    <div class="p-col-12 p-md-4">
                        <div class="p-inputgroup">
                            <span class="p-inputgroup-addon">Quantity</span>
                            <input type="text" pInputText placeholder="Quentity" [(ngModel)]="orderDetailObj.quentity">
                            <!-- <span class="p-inputgroup-addon">.00</span> -->
                        </div>
                    </div>
                    <!-- <input type="button" name="AddToList" id="AddToList" value="Add To List" class="btn btn-primary"
                        (click)="SaveToList()"> -->
                    <button class="btn btn-primary" (click)="SaveToList()"
                        style="width: 150px; height: 50px; margin-top: 23px; margin-left: 10px;">Save Drug To
                        List</button>
                </div>
            </div>

            <div class="row">
                <div class="p-field p-col-12 p-md-4">
                    <label for="basic">Exp_Date</label>
                    <p-calendar inputId="basic" [(ngModel)]="orderDetailObj.prod_Date"></p-calendar>
                </div>
                <div class="p-field p-col-12 p-md-4">
                    <label for="basic">Prod_Date</label>
                    <p-calendar inputId="basic" [(ngModel)]="orderDetailObj.exp_Date"></p-calendar>
                </div>
            </div>
            <div class="row">

                <div class="col">
                    <label for="" style="color: rgb(180, 15, 15); font-size: 30px;">From</label>
                    <div class="p-field-radiobutton">
                        <p-radioButton name="Pharmacy" value="Pharmacy" [(ngModel)]="selectedsource">
                        </p-radioButton>
                        <label for="city3" style="margin-left: 10px;">Pharmacy</label>
                    </div>
                    <div class="p-field-radiobutton">
                        <p-radioButton name="Supplier" value="Supplier" [(ngModel)]="selectedsource">
                        </p-radioButton>
                        <label for="city4" style="margin-left: 10px;">Supplier</label>
                    </div>
                    <div class="p-field-radiobutton">
                        <p-radioButton name="Pledge" value="Pledge" [(ngModel)]="selectedsource">
                        </p-radioButton>
                        <label for="Pledge" style="margin-left: 10px;">Pledge</label>
                    </div>
                </div>

                <div class="col">
                    <label for="" style="color: rgb(180, 15, 15); font-size: 30px;">To</label>

                    <div class="p-field-radiobutton">
                        <p-radioButton name="city" value="Pharmacy" [(ngModel)]="selectedTarget">
                        </p-radioButton>
                        <label for="city3" style="margin-left: 10px;">Pharmacy</label>
                    </div>
                    <div class="p-field-radiobutton">
                        <p-radioButton name="city" value="Supplier" [(ngModel)]="selectedTarget">
                        </p-radioButton>
                        <label for="city4" style="margin-left: 10px;">Supplier</label>
                    </div>
                    <div class="p-field-radiobutton">
                        <p-radioButton name="city" value="Pledge" [(ngModel)]="selectedTarget">
                        </p-radioButton>
                        <label for="city4" style="margin-left: 10px;">Pledge</label>
                    </div>
                </div>
            </div>
            <div>
                <div class="row">
                    <div style="width: 50%;">
                        <div *ngIf="selectedsource =='Pharmacy'" class="col">
                            <label class="labelstyle" style="margin-top: 20px; font-weight: bold;">Select
                                Pharmacy</label>
                            <!-- 
                        <select [(ngModel)]="order.pharmacyID" name="pharmacy" class="form-control">
                            <option value="" selected disabled>The Name {{pharmacyName}}</option>
                            <option *ngFor="let thhe of pharmacy" value="{{thhe.id}}">{{thhe.name}}</option>
                        </select> -->
                            <div class="form-control" style="font-weight: bold;">{{pharmacyName}}</div>

                        </div>
                    </div>
                    <div *ngIf="selectedTarget =='Supplier'" class="col" style="width: 50%;">
                        <label class="labelstyle" style="margin-top: 20px; font-weight: bold;">Select Supplier
                            Name</label>
                        <select [(ngModel)]="order.supplierID" name="supplier" class="form-control">
                            <option value="" selected disabled hidden>Supplier</option>
                            <option *ngFor="let thhe of supplier" value="{{thhe.id}}">{{thhe.name}}</option>
                        </select>
                    </div>

                    <div *ngIf="selectedTarget =='Pharmacy'" class="col" style="width: 50%;">
                        <label class="labelstyle" style="margin-top: 20px; font-weight: bold;">Select Pharmacy
                            Name</label>
                        <select [(ngModel)]="order.pharmacyTargetID" name="pharmacy" class="form-control">
                            <!-- <option value="" selected disabled>The Name {{pharmacyName}}</option> -->
                            <option *ngFor="let thhe of pharmacy" value="{{thhe.id}}">{{thhe.name}}</option>
                        </select>
                    </div>

                    <div *ngIf="selectedTarget =='Pledge'" class="col" style="width: 50%;">
                        <label class="labelstyle" style="margin-top: 20px; font-weight: bold;">Select Pledge
                            Name</label>
                        <select [(ngModel)]="order.pledgeID" name="pledge" class="form-control">
                            <option *ngFor="let thhe of pledges" value="{{thhe.id}}">{{thhe.name}}</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="p-grid p-fluid row">
                <div class="p-col-12 p-md-4">
                    <div class="p-inputgroup">
                        <span class="p-inputgroup-addon"><i class="pi pi-user"></i></span>
                        <input type="text" pInputText placeholder="Order Code" [(ngModel)]="order.code">
                    </div>
                </div>

                <div class="p-col-12 p-md-4">
                    <div class="p-inputgroup">
                        <span class="p-inputgroup-addon">#</span>
                        <input type="text" pInputText placeholder="Price" [(ngModel)]="order.number">
                        <span class="p-inputgroup-addon">.00</span>
                    </div>
                </div>

                <div class="p-col-12 p-md-4">
                    <div class="p-inputgroup">
                        <span class="p-inputgroup-addon">../../</span>
                        <!-- <input type="text" pInputText placeholder="Order Date" [(ngModel)]=""> -->
                        <p-calendar inputId="basic" [(ngModel)]="order.date"></p-calendar>

                    </div>
                </div>
            </div>



            <!-- <div class="form-group col">
                <label for="number" class="labelstyle">Order Number</label>
                <input type="text" name="number" pKeyFilter="int" required min="1" id="number" class="form-control"
                    placeholder="Order Number" aria-describedby="helpId">

            </div> -->
            <div>
                <textarea rows="5" cols="30" pInputTextarea placeholder="Comments" [(ngModel)]="order.comments"
                    style="margin-bottom: 20px; width: 100%;"></textarea>
            </div>

            <!-- <input type="button"  value="Add" > -->
            <button (click)="saveOrderList()" class="btn btn-success">Save Order</button>

            <!-- <div class="p-field p-col-12 p-md-3">
                <label for="horizontal">Horizontal with Step</label>
                <p-inputNumber [showButtons]="true" buttonLayout="horizontal" inputId="horizontal" spinnerMode="horizontal" [step]="0.25"
                decrementButtonClass="p-button-danger" incrementButtonClass="p-button-success" incrementButtonIcon="pi pi-plus" decrementButtonIcon="pi pi-minus" mode="currency" currency="EUR">
                </p-inputNumber>
            </div>

            <div class="p-field p-col-12 p-md-3">
                <label for="minmax-buttons">Min-Max Boundaries</label>
                <p-inputNumber mode="decimal" [showButtons]="true" inputId="minmax-buttons" [min]="0" [max]="100">
                </p-inputNumber>
            </div>
            <i class="pi pi-times" incrementButtonIcon="pi pi-plus"></i> -->
        </p-tabPanel>



        <p-tabPanel header="List Of Drugs" leftIcon="pi pi-user" rightIcon="pi pi-star" tooltip="1990">
            <p-table [value]="orderDetails">
                <ng-template pTemplate="caption">
                    <div class="p-d-flex p-ai-center p-jc-between">
                        Drugs
                        <p-button icon="pi pi-refresh"></p-button>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th>Name</th>
                        <th>Quentity</th>
                        <th>Image</th>
                        <th>Price</th>
                        <th>Expire Date</th>
                        <th>Delete</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-product>
                    <tr>
                        <td>{{product.tradeName}}</td>
                        <td>{{product.quentity}}</td>
                        <td><img src="http://localhost:51563/api/drugs/getImage/{{product.img}}" [alt]="product.name"
                                width="100" class="p-shadow-4" /></td>
                        <td>{{product.price | currency:'USD'}}</td>
                        <td>{{product.prod_Date}}</td>


                        <!-- <td><p-rating  [readonly]="true" [cancel]="false"></p-rating></td> -->
                        <td>
                            <mat-icon color="primary" style="cursor: pointer;" pRipple class="ui-button-warning"
                                (click)="deleteDrugFromList(product)">
                                delete_outline</mat-icon>
                            <p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000"></p-confirmDialog>
                            <!-- <button type="button" (click)="confirm1()" pButton icon="pi pi-check" label="Confirm"></button> -->
                            <!-- <p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog> -->
                        </td>
                        <!-- <td><span [class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span></td> -->
                    </tr>
                </ng-template>
                <ng-template pTemplate="summary">
                    <div class="p-d-flex p-ai-center p-jc-between">
                        In total there are {{orderDetails ? orderDetails.length : 0 }} products.
                    </div>
                </ng-template>
            </p-table>
        </p-tabPanel>



        <!-- 
        <p-tabPanel header="List Of orderVM" leftIcon="pi pi-user" rightIcon="pi pi-star" tooltip="1990">
            <p-table [value]="orderVM">
                <ng-template pTemplate="caption">
                    <div class="p-d-flex p-ai-center p-jc-between">
                        List Of Orders
                        <p-button icon="pi pi-refresh"></p-button>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th>Name</th>
                        <th>Quentity</th>
                        <th>Image</th>
                        <th>Price</th>
                        <th>Expire Date</th>
                        <th>Delete</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-product>
                    <tr>
                        <td>{{product.listDetails}}</td>




                       
                    </tr>
                </ng-template>
                <ng-template pTemplate="summary">
                    <div class="p-d-flex p-ai-center p-jc-between">
                        In total there are {{orderVM ? orderVM.length : 0 }} products.
                    </div>
                </ng-template>
            </p-table>


        </p-tabPanel>
 -->


        <p-tabPanel header="ORDER SENT TO " leftIcon="pi pi-user" rightIcon="pi pi-star" tooltip="1990">
            <div style="width: 100%;">
                <p-accordion *ngFor="let item of orderVM">
                    <div style="float: right; margin-left: 50px;">
                        <button class="btn btn-success" style="margin-right: 10px;">delivered</button>
                        <!-- <button class="btn btn-danger">Delete</button> -->
                    </div>
                    <p-accordionTab header={{item.number}}>
                        <p class="col" *ngIf="item.pharmacyTargetId != 0 "
                            style="color: rgb(170, 30, 30); font-weight: bold; font-size: 20px;">Delivered To
                            <span style="color: rgb(28, 6, 153);"> {{item.pharmacyTarget}}</span> Pharmacy</p>
                        <p class="col" *ngIf="item.pledgeId != null && item.supplierID==null "
                            style="color: rgb(170, 30, 30); font-weight: bold; font-size: 20px;">Delivered To
                            <span style="color: rgb(28, 6, 153);"> {{item.pledgeName}}</span> Pledge</p>
                        <p class="col" *ngIf="item.supplierID != null"
                            style="color: rgb(170, 30, 30); font-weight: bold; font-size: 20px;">Delivered To
                            <span style="color: rgb(28, 6, 153);"> {{item.supplierName}}</span> Company</p>
                        <p-accordion *ngFor="let quality of item.listDetails">
                            <p-accordionTab header={{quality.drugName}}>
                                <div class="row">
                                    <p class="col"><span style="font-weight: bold; color: rgb(28, 177, 53);">Drug
                                            Quantity : </span> <span
                                            style="color: rgb(204, 16, 16); font-weight: bold;">{{quality.quentityInEachOrder}}</span>
                                    </p>
                                </div>
                            </p-accordionTab>
                        </p-accordion>
                    </p-accordionTab>
                </p-accordion>
            </div>


            <!-- <button type="button" (click)="showDialog()" pButton icon="pi pi-external-link" label="View"></button>
            <p-dialog header="Flexible ScrollHeight" [(visible)]="dialogVisible" [style]="{width: '50vw'}" [baseZIndex]="10000" [maximizable]="true" [modal]="true" 
                [resizable]="true" [contentStyle]="{height: '300px'}" styleClass="p-fluid">
                <p-tree [value]="orderVM" scrollHeight="flex"></p-tree>   
                <ng-template pTemplate="footer">
                    <button type="button" pButton icon="pi pi-check" (click)="dialogVisible=false" label="Ok" class="p-button-text"></button>
                </ng-template> 
            </p-dialog> -->

            <!-- <h5>Virtual Scroll</h5>
            <p-tree [value]="files3" [virtualScroll]="true" [virtualNodeHeight]="33" scrollHeight="200px"></p-tree>
 -->

        </p-tabPanel>







        <p-tabPanel header="ORDERS DELIVERED FROM" leftIcon="pi pi-user" rightIcon="pi pi-star" tooltip="1990">
            <div style="width: 100%;">
                <p-accordion *ngFor="let item of orderVM2">
                    <div style="float: right; margin-left: 50px;" *ngIf="item.pendingStatus == true">
                        <button class="btn btn-success" style="margin-right: 10px;"
                            (click)="UpdatePendingStatus(item.orderId)">Confirm</button>
                        <button class="btn btn-danger">Delete</button>
                    </div>
                    <p-accordionTab header={{item.number}} *ngIf="item.pendingStatus == true">
                        <p class="col" style="color: rgb(170, 30, 30); font-weight: bold; font-size: 20px;">Sent
                            From
                            <span style="color: rgb(28, 6, 153);"> {{item.pharmacySource}}</span> Pharmacy</p>
                        <p-accordion *ngFor="let quality of item.listDetails">
                            <p-accordionTab header={{quality.drugName}}>
                                <div class="row">
                                    <p class="col"><span style="font-weight: bold; color: rgb(28, 177, 53);">Drug
                                            Quantity : </span> <span
                                            style="color: rgb(204, 16, 16); font-weight: bold;">{{quality.quentityInEachOrder}}</span>
                                    </p>
                                </div>
                            </p-accordionTab>
                        </p-accordion>
                    </p-accordionTab>
                </p-accordion>
            </div>
        </p-tabPanel>

        <p-tabPanel header="CONFIRMIED DELIVERED ORDERS" leftIcon="pi pi-user" rightIcon="pi pi-star" tooltip="1990">
            <div style="width: 100%;">
                <p-accordion *ngFor="let item of orderVM2">
                    <div style="float: right; margin-left: 50px;" *ngIf="item.pendingStatus == false">
                        <button class="btn btn-success" style="margin-right: 10px;"
                            (click)="UpdatePendingStatus(item.orderId)">Confirmed</button>
                    </div>
                    <p-accordionTab header={{item.number}} *ngIf="item.pendingStatus == false">
                        <p class="col" style="color: rgb(170, 30, 30); font-weight: bold; font-size: 20px;">Sent
                            From
                            <span style="color: rgb(28, 6, 153);"> {{item.pharmacySource}}</span> Pharmacy</p>
                        <p-accordion *ngFor="let quality of item.listDetails">
                            <p-accordionTab header={{quality.drugName}}>
                                <div class="row">
                                    <p class="col"><span style="font-weight: bold; color: rgb(28, 177, 53);">Drug
                                            Quantity : </span> <span
                                            style="color: rgb(204, 16, 16); font-weight: bold;">{{quality.quentityInEachOrder}}</span>
                                    </p>
                                </div>
                            </p-accordionTab>
                        </p-accordion>
                    </p-accordionTab>
                </p-accordion>
            </div>
        </p-tabPanel>
    </p-tabView>
</div>